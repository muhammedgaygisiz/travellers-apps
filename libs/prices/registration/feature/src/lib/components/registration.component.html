@if (registrationFormGroup.statusChanges | async) {}

<ta-page [enableBackButton]="true" [hideAuthButton]="true">
  <ta-card>
    <div class="ion-padding">
      <form [formGroup]="registrationFormGroup">
        <ion-item lines="full">
          <ion-input
            autocomplete="email"
            inputmode="email"
            formControlName="email"
            label="Email"
            labelPlacement="floating"
          />
        </ion-item>

        <ion-item lines="full">
          <ion-input
            type="password"
            formControlName="password"
            label="Password"
            labelPlacement="floating"
          />
        </ion-item>

        <ion-item lines="full">
          <ion-input
            type="password"
            formControlName="passwordConfirm"
            label="Confirm Password"
            labelPlacement="floating"
          />
        </ion-item>

        <ion-button
          class="ion-margin-top"
          expand="block"
          [disabled]="!registrationFormGroup.valid"
          (click)="submitRegistration.emit(registrationFormGroup.value)"
          data-cy="submit"
        >
          Save
        </ion-button>

        @if (registrationFormGroup.errors?.['mismatch']) {
        <div class="ion-margin-top">
          <ion-text color="danger"> Password does not match.</ion-text>
        </div>
        }
      </form>
    </div>
  </ta-card>

  <ta-card>
    <div class="ion-padding">
      <ta-password-validator
        [password$]="registrationFormGroup.controls['password'].valueChanges"
      />
    </div>
  </ta-card>
</ta-page>
